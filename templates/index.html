<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>AR Darts – Click Sim</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <style>
      /* Inline styles only for the calibration panel; HUD styles will live in style.css */
      #cal-panel {
        max-width: 900px;
        margin: 16px auto;
        padding: 12px 16px;
        background: #1e1e1e;
        color: #ddd;
        border: 1px solid #333;
        border-radius: 8px;
        font-size: 14px;
      }
      #cal-panel .row {
        display: flex;
        align-items: center;
        gap: 12px;
        margin: 8px 0;
        flex-wrap: wrap;
      }
      #cal-panel input[type="range"] {
        width: 280px;
      }
      #cal-panel input[type="number"] {
        width: 90px;
      }
      #cal-panel label {
        min-width: 120px;
      }
      #cal-panel .val {
        color: #9fe2ff;
        min-width: 48px;
        display: inline-block;
        text-align: right;
      }
      /* 100 mm ruler: visual bar; match it physically with the projector */
      #ruler {
        width: 400px;
        height: 8px;
        background: linear-gradient(90deg, #fff 0 50%, #000 50% 100%);
        background-size: 10px 8px;
        border: 1px solid #555;
      }
    </style>
  </head>
  <body>
    <button
      id="btn-cal"
      class="btn btn-ghost"
      style="position: fixed; right: 16px; top: 16px; z-index: 3"
    >
      ⚙︎ Calibrate
    </button>
    <h1>BainsyBuilds AR Darts</h1>

    <div id="board-container">
      <img
        src="{{ url_for('static', filename='images/dartboard.png') }}"
        id="dartboard"
        alt="Dartboard"
      />
      <canvas id="overlay"></canvas>
    </div>

    <!-- Calibration Panel -->
    <div id="cal-panel">
      <div class="row">
        <label>
          Show guides
          <input type="checkbox" id="cal-toggle" checked />
        </label>
      </div>
      <div class="row">
        <label for="cal-radius">Radius fudge</label>
        <input
          type="range"
          id="cal-radius"
          min="0.50"
          max="1.20"
          step="0.001"
          title="Overall radius scale (0.50–1.20)"
        />
        <span class="val" id="cal-r-val">—</span>
      </div>
      <div class="row">
        <label for="cal-dx">Center X (px)</label>
        <input type="number" id="cal-dx" min="-200" max="200" step="1" />
        <span class="val" id="cal-dx-val">—</span>
      </div>
      <div class="row">
        <label for="cal-dy">Center Y (px)</label>
        <input type="number" id="cal-dy" min="-200" max="200" step="1" />
        <span class="val" id="cal-dy-val">—</span>
      </div>
      <div class="row">
        <label for="cal-rot">Rotation (deg)</label>
        <input type="number" id="cal-rot" min="-30" max="30" step="0.1" />
        <span class="val" id="cal-rot-val">—</span>
      </div>
      <div class="row">
        <button id="cal-save" class="btn">Save Calibration</button>
        <small id="cal-saved" style="opacity: 0.85"></small>
      </div>
      <div class="row">
        <div id="ruler" title="100 mm ruler for projector scale"></div>
        <small
          >On projector nights: adjust overall scale until this bar measures
          exactly 100 mm with a real ruler.</small
        >
      </div>
    </div>

    <!-- GAME HUD: Around-the-World prototype -->
    <section id="hud" class="hud">
      <div class="hud-row">
        <div class="hud-cell">Player: <span id="hud-player">P1</span></div>
        <div class="hud-cell">Target: <span id="hud-target">1</span></div>
        <div class="hud-cell">Throws left: <span id="hud-throws">3</span></div>
      </div>
      <div class="hud-row hud-actions">
        <button id="start-btn" type="button">Start</button>
        <button id="undo-btn" type="button" disabled>Undo</button>
        <button id="reset-btn" type="button">Reset</button>
      </div>
      <div class="hud-row">
        <div id="status">Click the board to simulate a dart.</div>
      </div>
      <div class="hud-row">
        <div id="hit-log" class="hit-log" aria-live="polite"></div>
      </div>
    </section>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  </body>
</html>
